title: Унифицированное руководство SQLAlchemy

???+ quote "Об этом документе"

    Универсальное руководство по SQLAlchemy является интегрированным между компонентами Core и ORM и служит единым введением
    в SQLAlchemy в целом. Для пользователей SQLAlchemy в серии 1.x, в стиле работы 2.0, ORM использует Core-стиль запросов с
    использованием конструкции select(), а транзакционная семантика между Core-соединениями и ORM-сессиями эквивалентна.
    Обратите внимание на стили с синей границей для каждого раздела, которые покажут вам, насколько "ORM-подобным" является
    конкретная тема!
    
    Пользователи, которые уже знакомы с SQLAlchemy, и особенно те, кто хочет перенести существующие приложения для работы в
    рамках серии SQLAlchemy 2.0 в переходной фазе 1.4, также должны обратить внимание на документ "Руководство по миграции
    на SQLAlchemy 2.0 - Основные изменения".
    
    Для новичка в документе много деталей, однако к концу он будет считаться "Алхимиком".

SQLAlchemy представлен в виде двух отдельных API, построенных друг на друге. Эти API называются Core и ORM.

???+ info "SQLAlchemy Core"

    SQLAlchemy Core является фундаментальной архитектурой для SQLAlchemy как "набора инструментов для работы с базами
    данных". Библиотека предоставляет инструменты для управления подключением к базе данных, взаимодействия с запросами и
    результатами базы данных и программного конструирования операторов SQL.
    Разделы, в основном относящиеся к Core, не будут ссылаться на ORM. Используемые в этих разделах конструкции SQLAlchemy
    будут импортированы из пространства имен sqlalchemy. Как дополнительный индикатор классификации темы, они также будут
    иметь подпись сверху 'SQLAlchemy Core'. При использовании ORM эти концепции по-прежнему действуют, но они менее явны в
    пользовательском коде, ориентированном на ORM. Пользователям ORM следует прочитать эти разделы, но не ожидать, что они
    будут использовать эти API напрямую для ориентированного на ORM кода.

???+ info "SQLAlchemy ORM"

    SQLAlchemy ORM - SQLAlchemy ORM - это расширение Core, которое предоставляет опциональные возможности отображения
    объектов в реляционных базах данных. ORM предоставляет дополнительный слой конфигурации, позволяющий отображать
    пользовательские классы Python на таблицы базы данных и другие конструкции, а также механизм сохранения объектов,
    известный как Session. Затем ORM расширяет SQL Expression Language на уровне Core, чтобы позволить составлять и вызывать
    SQL-запросы в терминах определенных пользователем объектов.
    
    Разделы, которые относятся в основном к ORM, должны иметь название, включающее фразу "ORM", чтобы было ясно, что это
    связано с ORM. Конструкции SQLAlchemy, используемые в этих разделах, будут импортироваться из пространства имен
    sqlalchemy.orm. Наконец, как дополнительный индикатор классификации темы, они также будут иметь подпись 'SQLAlchemy ORM'. 
    Пользователи только Core могут пропустить эти разделы.

## Обзор учебника {#tutorial-review}

В учебнике будут представлены оба подхода, сначала с уклоном в Core, затем расширяясь до ORM.

## Основные разделы учебника {#main-parts-of-tutorial}

- **Установка соединения - Engine** - все приложения SQLAlchemy начинаются с объекта Engine; здесь мы узнаем, как
  создать его.

- **Работа с транзакциями и DBAPI** - здесь представлено использование API Engine и связанных с ним объектов Connection
  и Result. Этот контент ориентирован на Core, однако ORM-пользователи также должны быть знакомы по крайней мере с
  объектом Result.

- **Работа с метаданными базы данных** - абстракции SQL SQLAlchemy, а также ORM, зависят от системы определения
  конструкций схемы базы данных в виде объектов Python. Этот раздел представляет, как это сделать с точки зрения Core и
  ORM.

- **Работа с данными** - здесь мы узнаем, как создавать, выбирать, обновлять и удалять данные в базе данных. Здесь будут
  представлены так называемые операции CRUD в терминах SQLAlchemy Core со ссылками на их ORM-аналоги. Операция SELECT,
  которая подробно рассматривается в разделе Использование операторов SELECT, применима как для Core, так и для ORM.

- **Манипуляция данными с помощью ORM** - здесь будут рассмотрены способы вставки, обновления и удаления, а также
  способы обработки транзакций в ORM.

- **Работа со связанными объектами ORM** - здесь вводится понятие конструкции relationship() и предоставляется краткий
  обзор того, как ее использовать, со ссылками на более подробную документацию.

- **Дальнейшее чтение** - перечисляет ряд основных разделов документации верхнего уровня, которые полностью описывают
  введенные в учебнике концепции.

## Об учебнике и версии {#about-book-and-version}

Этот учебник изначально написан с использованием системы doctest. Все фрагменты кода, написанные с помощью >>>, фактически
запускаются в рамках тестовой набора SQLAlchemy, и читателя приглашают работать с приведенными примерами кода в реальном
времени собственным интерпретатором Python.

Версия учебника которую читаете ВЫ, была создана с помощью системы mkdocs, для перевода на русский язык использовался
ChatGPT и одна человеческая особь для правок

Если вы запускаете примеры, рекомендуется быстро проверить, что мы используем версию 2.0 SQLAlchemy:

``` python
>>> import sqlalchemy
>>> sqlalchemy.__version__  
2.0.0
```